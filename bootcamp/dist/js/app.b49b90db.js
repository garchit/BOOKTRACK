(function(){"use strict";var e={7439:function(e,t,o){var s=o(5130),n=o(6768);const a={id:"app"};function r(e,t){const o=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.bF)(o)])}var i=o(1241);const l={},c=(0,i.A)(l,[["render",r]]);var d=c,u=o(1387),k=o(4232);const h={class:"navbar"},p=(0,n.Lk)("div",{class:"navbar-brand"},[(0,n.Lk)("h1",{class:"title"},"Library ")],-1),m={class:"navbar-menu"},b={class:"navbar-end"},v=(0,n.Lk)("div",null,[(0,n.Lk)("h2",null,"Read Borrow Learn")],-1),f={class:"section-list"},L={key:0},g={key:1},y=(0,n.Lk)("p",null,"No sections available.",-1),w=[y];function S(e,t,o,s,a,r){const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("nav",h,[p,(0,n.Lk)("div",m,[(0,n.Lk)("div",b,[(0,n.bF)(i,{to:"/",class:"navbar-item"},{default:(0,n.k6)((()=>[(0,n.eW)(" Home")])),_:1}),e.isauthenticated?((0,n.uX)(),(0,n.Wv)(i,{key:0,to:"/userlogin",class:"navbar-item"},{default:(0,n.k6)((()=>[(0,n.eW)(" Login")])),_:1})):(0,n.Q3)("",!0),e.isauthenticated?((0,n.uX)(),(0,n.Wv)(i,{key:1,to:"/signup",class:"navbar-item"},{default:(0,n.k6)((()=>[(0,n.eW)(" Signup")])),_:1})):(0,n.Q3)("",!0),e.isauthenticated&&e.isAdmin?((0,n.uX)(),(0,n.Wv)(i,{key:2,to:"/dashboard",class:"navbar-item"},{default:(0,n.k6)((()=>[(0,n.eW)(" Dashboard")])),_:1})):(0,n.Q3)("",!0),e.isauthenticated?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("button",{key:3,onClick:t[0]||(t[0]=(...e)=>r.logout&&r.logout(...e)),class:"navbar-item"}," Logout"))])])]),v,(0,n.Lk)("div",f,[a.sections.length>0?((0,n.uX)(),(0,n.CE)("div",L,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.sections,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"section"},[(0,n.Lk)("h2",null,(0,k.v_)(e.name),1),(0,n.Lk)("p",null,(0,k.v_)(e.description),1),(0,n.Lk)("p",null,"Created Date: "+(0,k.v_)(e.date_created),1)])))),128))])):((0,n.uX)(),(0,n.CE)("div",g,w))])])}o(4114);var _=o(8355),D={data(){return{sections:[]}},mounted(){this.fetchSections()},methods:{async fetchSections(){try{const e=await _.A.get("http://127.0.0.1:8000/sections");this.sections=e.data}catch(e){console.error("Error fetching sections:",e)}},logout(){localStorage.removeItem("access_token"),localStorage.removeItem("userRole"),localStorage.setItem("isauthenticated",!1),this.isauthenticated=!1,this.$router.push("/")}}};const C=(0,i.A)(D,[["render",S]]);var A=C;const E=e=>((0,n.Qi)("data-v-38a571fb"),e=e(),(0,n.jt)(),e),B={class:"signup-container"},I={class:"signup-form"},U=E((()=>(0,n.Lk)("h2",null,"Sign Up",-1))),X=E((()=>(0,n.Lk)("label",{for:"username"},"Username",-1))),$=E((()=>(0,n.Lk)("label",{for:"password"},"Password",-1))),x=E((()=>(0,n.Lk)("button",{type:"submit"},"Login",-1))),N={key:0,class:"alert alert-success",role:"alert"},q={key:1,class:"alert alert-danger",role:"alert"};function O(e,t,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",B,[(0,n.Lk)("div",I,[U,(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>i.signup&&i.signup(...e)),["prevent"]))},[X,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),required:""},null,512),[[s.Jo,r.username]]),$,(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),required:""},null,512),[[s.Jo,r.password]]),x],32),r.successAlertVisible?((0,n.uX)(),(0,n.CE)("div",N," Login successful! Redirecting to dashboard... ")):(0,n.Q3)("",!0),r.errorAlertVisible?((0,n.uX)(),(0,n.CE)("div",q,(0,k.v_)(r.errorMessage),1)):(0,n.Q3)("",!0)])])}var V={data(){return{username:"",password:"",successAlertVisible:!1,errorAlertVisible:!1,errorMessage:""}},methods:{signup(){const e={username:this.username,password:this.password};this.$axios.post("/login",e).then((e=>{const t=e.data.access_token;localStorage.setItem("access_token",t);const o=e.data.user;localStorage.setItem("user",JSON.stringify(o)),this.successAlertVisible=!0,setTimeout((()=>{this.$router.push("/dashboard")}),2e3)})).catch((e=>{this.errorAlertVisible=!0,e.response&&e.response.data&&e.response.data.message?this.errorMessage=e.response.data.message:this.errorMessage="An unknown error occurred"}))}}};const F=(0,i.A)(V,[["render",O],["__scopeId","data-v-38a571fb"]]);var J=F;const P=e=>((0,n.Qi)("data-v-305a9c01"),e=e(),(0,n.jt)(),e),Q={class:"home-container"},R=P((()=>(0,n.Lk)("h1",null,"Welcome to the BOOKTRACK",-1))),T={class:"actions"};function j(e,t,o,s,a,r){const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Q,[R,(0,n.Lk)("div",T,[(0,n.bF)(i,{to:"/signup",class:"action-btn"},{default:(0,n.k6)((()=>[(0,n.eW)("Sign Up")])),_:1}),(0,n.bF)(i,{to:"/userlogin",class:"action-btn"},{default:(0,n.k6)((()=>[(0,n.eW)("login now ")])),_:1}),(0,n.bF)(i,{to:"/admin",class:"action-btn"},{default:(0,n.k6)((()=>[(0,n.eW)("Admin login")])),_:1})])])}var M={name:"HomeWorld"};const W=(0,i.A)(M,[["render",j],["__scopeId","data-v-305a9c01"]]);var K=W;const Y=(0,n.Lk)("h2",null,"Signup",-1),G=(0,n.Lk)("label",{for:"username"},"Username",-1),z=(0,n.Lk)("label",{for:"password"},"Password",-1),H=(0,n.Lk)("button",{type:"submit"},"Signup",-1);function Z(e,t,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",null,[Y,(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>i.signup&&i.signup(...e)),["prevent"]))},[G,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),required:""},null,512),[[s.Jo,r.username]]),z,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),required:""},null,512),[[s.Jo,r.password]]),H],32)])}var ee=o(7411),te={data(){return{username:"",password:"",role:"user"}},setup(){const e=(0,ee.dj)();return{toast:e}},methods:{async signup(){try{const e=await _.A.post("http://127.0.0.1:5000/signup",{username:this.username,password:this.password,role:this.role});console.log("Signup Successful",e.data),this.toast.success("Signup successful!"),this.$router.push("/userlogin")}catch(e){console.error("Signup Error:",e),this.toast.error("Signup failed. Please try again.")}}},created(){const{toast:e}=this.$options.setup();this.toast=e}};const oe=(0,i.A)(te,[["render",Z]]);var se=oe;const ne=e=>((0,n.Qi)("data-v-b3e32040"),e=e(),(0,n.jt)(),e),ae={class:"container mt-5"},re=ne((()=>(0,n.Lk)("h1",{class:"mb-4"},"Admin's Login",-1))),ie={class:"form-group"},le=ne((()=>(0,n.Lk)("label",{for:"username"},"Enter Your Username:",-1))),ce={class:"form-group"},de=ne((()=>(0,n.Lk)("label",{for:"password"},"Enter Your Password:",-1))),ue=ne((()=>(0,n.Lk)("button",{type:"submit",class:"btn btn-primary"},"Login",-1))),ke={key:0,class:"alert alert-success mt-3",role:"alert"},he={key:1,class:"alert alert-danger mt-3",role:"alert"};function pe(e,t,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",ae,[re,(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>i.login&&i.login(...e)),["prevent"]))},[(0,n.Lk)("div",ie,[le,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),required:""},null,512),[[s.Jo,r.username]])]),(0,n.Lk)("div",ce,[de,(0,n.bo)((0,n.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),required:""},null,512),[[s.Jo,r.password]])]),ue],32),r.successMessage?((0,n.uX)(),(0,n.CE)("div",ke,(0,k.v_)(r.successMessage),1)):(0,n.Q3)("",!0),r.errorMessage?((0,n.uX)(),(0,n.CE)("div",he,(0,k.v_)(r.errorMessage),1)):(0,n.Q3)("",!0)])}var me={data(){return{username:"",password:"",successMessage:"",errorMessage:""}},methods:{login(){const e={username:this.username,password:this.password};this.$axios.post("/admin_login",e).then((()=>{this.errorMessage="",localStorage.setItem("userRole","admin"),this.successMessage="Login successful",setTimeout((()=>{this.$router.push("/adminDashboard")}),2e3)})).catch((e=>{this.successMessage="",e.response&&e.response.data&&e.response.data.message?this.errorMessage=e.response.data.message:(console.error("An unknown error occurred:",e),this.errorMessage="An unknown error occurred")}))}}};const be=(0,i.A)(me,[["render",pe],["__scopeId","data-v-b3e32040"]]);var ve=be;const fe=e=>((0,n.Qi)("data-v-ad61353e"),e=e(),(0,n.jt)(),e),Le=fe((()=>(0,n.Lk)("h2",{class:"mb-4"},"Manage Sections",-1))),ge={class:"actions"},ye={key:0},we=fe((()=>(0,n.Lk)("h3",null,"Sections",-1))),Se={class:"row justify-content-center w-100"},_e={class:"table table-striped",style:{width:"70%"}},De=fe((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"Description"),(0,n.Lk)("th",null,"Created Date"),(0,n.Lk)("th",null,"Options")])],-1))),Ce=["onClick"],Ae=["onClick"],Ee={key:1},Be=fe((()=>(0,n.Lk)("p",null,"No sections available.",-1))),Ie=[Be],Ue={key:2,class:"overlay"},Xe={class:"overlay-content"},$e=fe((()=>(0,n.Lk)("h3",null,"Edit Section",-1))),xe={class:"mb-3"},Ne=fe((()=>(0,n.Lk)("label",{for:"editedSectionName",class:"form-label"},"Section Name:",-1))),qe={class:"mb-3"},Oe=fe((()=>(0,n.Lk)("label",{for:"editedSectionDescription",class:"form-label"},"Description:",-1))),Ve=fe((()=>(0,n.Lk)("button",{type:"submit",class:"btn btn-primary me-2 mr-2"},"Save",-1))),Fe={key:3,class:"overlay"},Je={class:"overlay-content"},Pe=fe((()=>(0,n.Lk)("h3",null,"Confirm Delete",-1))),Qe=fe((()=>(0,n.Lk)("p",null,"Are you sure you want to delete this section?",-1)));function Re(e,t,o,a,r,i){const l=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[Le,(0,n.Lk)("div",ge,[(0,n.bF)(l,{to:"/addsection",class:"btn btn-primary mr-3"},{default:(0,n.k6)((()=>[(0,n.eW)("Add section")])),_:1}),(0,n.bF)(l,{to:"/managebook",class:"btn btn-primary mr-3"},{default:(0,n.k6)((()=>[(0,n.eW)("Manage Sections")])),_:1}),(0,n.bF)(l,{to:"/userbookaccess",class:"btn btn-primary"},{default:(0,n.k6)((()=>[(0,n.eW)("Requested Books ")])),_:1})]),(0,n.Lk)("div",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchTerm=t),placeholder:"Search sections",class:"form-control mb-3",style:{width:"50%","text-align":"center"}},null,512),[[s.Jo,e.searchTerm]]),(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.fetchSearchSections&&i.fetchSearchSections(...e))},"Search")]),r.sections.length>0?((0,n.uX)(),(0,n.CE)("div",ye,[we,(0,n.Lk)("div",Se,[(0,n.Lk)("table",_e,[De,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.sections,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t,style:{"font-size":"22px"}},[(0,n.Lk)("td",null,(0,k.v_)(e.name),1),(0,n.Lk)("td",null,(0,k.v_)(e.description),1),(0,n.Lk)("td",null,(0,k.v_)(i.formatDate(e.date_created)),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{onClick:t=>i.editSection(e),class:"btn btn-outline-primary mr-2"},"Edit",8,Ce),(0,n.Lk)("button",{onClick:t=>i.confirmDelete(e),class:"btn btn-outline-danger ml-2 mr-2"},"Delete",8,Ae)])])))),128))])])])])):((0,n.uX)(),(0,n.CE)("div",Ee,Ie)),r.editingSection?((0,n.uX)(),(0,n.CE)("div",Ue,[(0,n.Lk)("div",Xe,[$e,(0,n.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>i.saveEdit&&i.saveEdit(...e)),["prevent"])),class:"form"},[(0,n.Lk)("div",xe,[Ne,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"editedSectionName","onUpdate:modelValue":t[2]||(t[2]=e=>r.editedSectionName=e),required:"",class:"form-control"},null,512),[[s.Jo,r.editedSectionName]])]),(0,n.Lk)("div",qe,[Oe,(0,n.bo)((0,n.Lk)("textarea",{id:"editedSectionDescription","onUpdate:modelValue":t[3]||(t[3]=e=>r.editedSectionDescription=e),class:"form-control"},null,512),[[s.Jo,r.editedSectionDescription]])]),Ve,(0,n.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.cancelEdit&&i.cancelEdit(...e)),class:"btn btn-secondary"},"Cancel")],32)])])):(0,n.Q3)("",!0),r.confirmingDelete?((0,n.uX)(),(0,n.CE)("div",Fe,[(0,n.Lk)("div",Je,[Pe,Qe,(0,n.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.deleteSection&&i.deleteSection(...e)),class:"btn btn-danger me-2 mr-2"},"Yes, Delete"),(0,n.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.cancelDelete&&i.cancelDelete(...e)),class:"btn btn-secondary"},"Cancel")])])):(0,n.Q3)("",!0)])}var Te={data(){return{newSectionName:"",newSectionDescription:"",sections:[],editingSection:null,editedSectionName:"",editedSectionDescription:"",confirmingDelete:!1,deletedSection:null,searchQuery:""}},mounted(){this.fetchSections()},methods:{async fetchSections(){try{const e=await _.A.get("/sections");this.sections=e.data}catch(e){console.error("Error fetching sections:",e)}},async fetchSearchSections(){try{console.log("I am working ");const e=await _.A.get(`/sections?search=${this.searchTerm}`);this.sections=e.data}catch(e){console.error("Error fetching sections:",e)}},async createSection(){try{const e=await _.A.post("/sections",{name:this.newSectionName,description:this.newSectionDescription});console.log(e.data),this.fetchSections(),window.location.reload()}catch(e){console.error("Error creating section:",e)}},editSection(e){this.editingSection=e.id,this.editedSectionName=e.name,this.editedSectionDescription=e.description},async saveEdit(){try{const e=await _.A.put(`/sections/${this.editingSection}`,{name:this.editedSectionName,description:this.editedSectionDescription});console.log(e.data),this.fetchSections(),this.cancelEdit()}catch(e){console.error("Error saving edit:",e)}},cancelEdit(){this.editingSection=null,this.editedSectionName="",this.editedSectionDescription=""},confirmDelete(e){this.confirmingDelete=!0,this.deletedSection=e},async deleteSection(){try{const e=await _.A.delete(`/sections/${this.deletedSection.id}`);console.log(e.data),this.fetchSections(),this.confirmingDelete=!1}catch(e){console.error("Error deleting section:",e)}},cancelDelete(){this.confirmingDelete=!1,this.deletedSection=null},formatDate(e){return new Date(e).toLocaleDateString()}}};const je=(0,i.A)(Te,[["render",Re],["__scopeId","data-v-ad61353e"]]);var Me=je;const We=(0,n.Lk)("h2",null,"New login Form ",-1),Ke=(0,n.Lk)("label",{for:"username"},"Username",-1),Ye=(0,n.Lk)("label",{for:"password"},"Password",-1),Ge=(0,n.Lk)("button",{type:"submit"},"Submit",-1);function ze(e,t,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",null,[We,(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>i.handleLogin&&i.handleLogin(...e)),["prevent"]))},[Ke,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),required:""},null,512),[[s.Jo,r.username]]),Ye,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),required:""},null,512),[[s.Jo,r.password]]),Ge],32)])}var He={data(){return{username:"",password:""}},methods:{async handleLogin(){try{const e=await _.A.post("http://127.0.0.1:5000/userlogin",{username:this.username,password:this.password});localStorage.setItem("access_token",e.data.access_token),localStorage.setItem("userRole",e.data.userRole),localStorage.setItem("isauthenticated",!0),localStorage.setItem("username",e.data.username),localStorage.setItem("user_id",e.data.user_id),"admin"===e.data.userRole?this.$router.push("/adminDashboard"):this.$router.push(`/usersection/${e.data.user_id}`)}catch(e){console.error(e.message)}}}};const Ze=(0,i.A)(He,[["render",ze]]);var et=Ze;const tt=(0,n.Lk)("h1",null," Add new section here ",-1),ot={class:"mb-4"},st=(0,n.Lk)("h3",null,"Create Section",-1),nt={class:"mb-3"},at=(0,n.Lk)("label",{for:"sectionName",class:"form-label"},"Section Name:",-1),rt={class:"mb-3"},it=(0,n.Lk)("label",{for:"sectionDescription",class:"form-label"},"Description:",-1),lt=(0,n.Lk)("button",{type:"submit",class:"btn btn-primary"},"Create Section",-1);function ct(e,t,o,a,r,i){return(0,n.uX)(),(0,n.CE)(n.FK,null,[tt,(0,n.Lk)("div",ot,[st,(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>i.createSection&&i.createSection(...e)),["prevent"])),class:"form"},[(0,n.Lk)("div",nt,[at,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"sectionName","onUpdate:modelValue":t[0]||(t[0]=e=>r.newSectionName=e),required:"",class:"form-control"},null,512),[[s.Jo,r.newSectionName]])]),(0,n.Lk)("div",rt,[it,(0,n.bo)((0,n.Lk)("textarea",{id:"sectionDescription","onUpdate:modelValue":t[1]||(t[1]=e=>r.newSectionDescription=e),class:"form-control"},null,512),[[s.Jo,r.newSectionDescription]])]),lt],32)])],64)}var dt={data(){return{newSectionName:"",newSectionDescription:"",sections:[],editingSection:null,editedSectionName:"",editedSectionDescription:"",confirmingDelete:!1,deletedSection:null}},methods:{async createSection(){try{const e=await _.A.post("/sections",{name:this.newSectionName,description:this.newSectionDescription});console.log(e.data),this.$router.push("/adminDashboard")}catch(e){console.error("Error creating section:",e)}}}};const ut=(0,i.A)(dt,[["render",ct]]);var kt=ut;const ht=e=>((0,n.Qi)("data-v-467cd1d5"),e=e(),(0,n.jt)(),e),pt={class:"container mt-4"},mt=ht((()=>(0,n.Lk)("h2",null,"Add New Book",-1))),bt={class:"mb-3"},vt=ht((()=>(0,n.Lk)("label",{for:"name",class:"form-label"},"Name:",-1))),ft=ht((()=>(0,n.Lk)("div",{class:"invalid-feedback"},"Name is required",-1))),Lt={class:"mb-3"},gt=ht((()=>(0,n.Lk)("label",{for:"content",class:"form-label"},"Content:",-1))),yt=ht((()=>(0,n.Lk)("div",{class:"invalid-feedback"},"Content is required",-1))),wt={class:"mb-3"},St=ht((()=>(0,n.Lk)("label",{for:"author",class:"form-label"},"Author:",-1))),_t=ht((()=>(0,n.Lk)("div",{class:"invalid-feedback"},"Author is required",-1))),Dt={class:"mb-3"},Ct=ht((()=>(0,n.Lk)("label",{for:"price",class:"form-label"},"Price:",-1))),At={class:"mb-3"},Et=ht((()=>(0,n.Lk)("label",{for:"poster",class:"form-label"},"Poster:",-1))),Bt=ht((()=>(0,n.Lk)("button",{type:"submit",class:"btn btn-primary"},"Add Book",-1)));function It(e,t,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",pt,[mt,(0,n.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>i.addBook&&i.addBook(...e)),["prevent"])),class:"needs-validation",novalidate:""},[(0,n.Lk)("div",bt,[vt,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>r.book.name=e),class:"form-control",required:""},null,512),[[s.Jo,r.book.name]]),ft]),(0,n.Lk)("div",Lt,[gt,(0,n.bo)((0,n.Lk)("textarea",{id:"content","onUpdate:modelValue":t[1]||(t[1]=e=>r.book.content=e),class:"form-control",required:""},null,512),[[s.Jo,r.book.content]]),yt]),(0,n.Lk)("div",wt,[St,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"author","onUpdate:modelValue":t[2]||(t[2]=e=>r.book.author=e),class:"form-control",required:""},null,512),[[s.Jo,r.book.author]]),_t]),(0,n.Lk)("div",Dt,[Ct,(0,n.bo)((0,n.Lk)("input",{type:"number",id:"price","onUpdate:modelValue":t[3]||(t[3]=e=>r.book.price=e),class:"form-control"},null,512),[[s.Jo,r.book.price]])]),(0,n.Lk)("div",At,[Et,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"poster","onUpdate:modelValue":t[4]||(t[4]=e=>r.book.poster=e),class:"form-control"},null,512),[[s.Jo,r.book.poster]])]),Bt],32)])}var Ut={data(){return{book:{name:"",content:"",author:"",price:null,poster:"",section_id:localStorage.getItem("sectionId")}}},methods:{async addBook(){try{const e=new FormData;e.append("name",this.book.name),e.append("content",this.book.content),e.append("author",this.book.author),e.append("price",this.book.price),e.append("poster",this.book.poster),await _.A.post(`/sections/${this.book.section_id}/books`,e,{headers:{"Content-Type":"multipart/form-data"}}),alert("Book added successfully!"),this.$router.push(`/storebooks/${this.book.section_id}`)}catch(e){console.error("Error adding book:",e),alert("Failed to add book. Please try again.")}}}};const Xt=(0,i.A)(Ut,[["render",It],["__scopeId","data-v-467cd1d5"]]);var $t=Xt;const xt=(0,n.Lk)("h1",null,"I am Managing differnt books ",-1),Nt={key:0},qt=(0,n.Lk)("h3",null,"Sections",-1),Ot={class:"table table-striped table-hover"},Vt=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"Name"),(0,n.Lk)("th",{scope:"col"},"Description"),(0,n.Lk)("th",{scope:"col"},"Created Date"),(0,n.Lk)("th",{scope:"col"},"Options")])],-1),Ft=["onClick"],Jt=["onClick"],Pt={key:1},Qt=(0,n.Lk)("p",null,"No sections available.",-1),Rt=[Qt];function Tt(e,t,o,s,a,r){return(0,n.uX)(),(0,n.CE)("div",null,[xt,a.sections.length>0?((0,n.uX)(),(0,n.CE)("div",Nt,[qt,(0,n.Lk)("table",Ot,[Vt,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.sections,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("td",null,(0,k.v_)(e.name),1),(0,n.Lk)("td",null,(0,k.v_)(e.description),1),(0,n.Lk)("td",null,(0,k.v_)(r.formatDate(e.date_created)),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-info mr-2",onClick:t=>r.handleViewBook(e.id)},"view Books",8,Ft),(0,n.Lk)("button",{class:"btn btn-warning",onClick:t=>r.handleAddBook(e.id)},"Add Books",8,Jt)])])))),128))])])])):((0,n.uX)(),(0,n.CE)("div",Pt,Rt))])}var jt={data(){return{newSectionName:"",newSectionDescription:"",sections:[],editingSection:null,editedSectionName:"",editedSectionDescription:"",confirmingDelete:!1,deletedSection:null}},mounted(){this.fetchSections()},methods:{async fetchSections(){try{const e=await _.A.get("/sections");this.sections=e.data}catch(e){console.error("Error fetching sections:",e)}},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},handleAddBook(e){localStorage.setItem("sectionId",e),this.$router.push(`/addbook/${e}`)},handleViewBook(e){localStorage.setItem("sectionId",e),this.$router.push(`/storebooks/${e}`)}}};const Mt=(0,i.A)(jt,[["render",Tt]]);var Wt=Mt;const Kt=e=>((0,n.Qi)("data-v-40235582"),e=e(),(0,n.jt)(),e),Yt=Kt((()=>(0,n.Lk)("h1",null,"Books",-1))),Gt={class:"search-container"},zt={class:"container"},Ht={class:"row"},Zt={class:"card"},eo=["src"],to={class:"card-body"},oo={class:"card-title"},so={class:"card-text"},no={class:"card-text"},ao=["onClick"],ro=["onClick"],io={key:0},lo=Kt((()=>(0,n.Lk)("p",null,"No books available.",-1))),co=[lo],uo={key:1,class:"overlay"},ko={class:"overlay-content"},ho=Kt((()=>(0,n.Lk)("h2",null,"Update Book",-1))),po=Kt((()=>(0,n.Lk)("label",{for:"name"},"Name:",-1))),mo=Kt((()=>(0,n.Lk)("label",{for:"content"},"Content:",-1))),bo=Kt((()=>(0,n.Lk)("label",{for:"author"},"Author:",-1))),vo=Kt((()=>(0,n.Lk)("label",{for:"price"},"Price:",-1))),fo=Kt((()=>(0,n.Lk)("label",{for:"poster"},"Poster:",-1))),Lo=Kt((()=>(0,n.Lk)("button",{type:"submit",class:"btn btn-primary"},"Save",-1))),go={key:2,class:"overlay"},yo={class:"overlay-content"},wo=Kt((()=>(0,n.Lk)("h2",null,"Delete Book",-1)));function So(e,t,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",null,[Yt,(0,n.Lk)("div",Gt,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchTerm=t),placeholder:"Search books",class:"form-control mb-3",style:{width:"50%","text-align":"center"}},null,512),[[s.Jo,e.searchTerm]]),(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.fetchSearchBooks&&i.fetchSearchBooks(...e)),class:"btn btn-primary"},"Search")]),(0,n.Lk)("div",zt,[(0,n.Lk)("div",Ht,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.books,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"col-md-4 mb-4"},[(0,n.Lk)("div",Zt,[(0,n.Lk)("img",{src:e.poster,class:"card-img-top",alt:"Book Cover",height:"300px",width:"300px"},null,8,eo),(0,n.Lk)("div",to,[(0,n.Lk)("h5",oo,(0,k.v_)(e.name),1),(0,n.Lk)("p",so,"Author - "+(0,k.v_)(e.author),1),(0,n.Lk)("p",no,"Price - "+(0,k.v_)(e.price),1),(0,n.Lk)("button",{class:"btn btn-primary mr-3",onClick:t=>i.openUpdateOverlay(e)},"Update Book",8,ao),(0,n.Lk)("button",{class:"btn btn-danger",onClick:t=>i.openDeleteOverlay(e)},"Delete Book",8,ro)])])])))),128))])]),0===r.books.length?((0,n.uX)(),(0,n.CE)("div",io,co)):(0,n.Q3)("",!0),r.showUpdateOverlay?((0,n.uX)(),(0,n.CE)("div",uo,[(0,n.Lk)("div",ko,[ho,(0,n.Lk)("form",{onSubmit:t[8]||(t[8]=(0,s.D$)(((...e)=>i.updateBook&&i.updateBook(...e)),["prevent"]))},[po,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>r.editBook.name=e),required:""},null,512),[[s.Jo,r.editBook.name]]),mo,(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.editBook.content=e),required:""},null,512),[[s.Jo,r.editBook.content]]),bo,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>r.editBook.author=e),required:""},null,512),[[s.Jo,r.editBook.author]]),vo,(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=e=>r.editBook.price=e),required:""},null,512),[[s.Jo,r.editBook.price]]),fo,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>r.editBook.poster=e)},null,512),[[s.Jo,r.editBook.poster]]),Lo,(0,n.Lk)("button",{class:"btn btn-secondary",onClick:t[7]||(t[7]=(...e)=>i.closeOverlay&&i.closeOverlay(...e))},"Cancel")],32)])])):(0,n.Q3)("",!0),r.showDeleteOverlay?((0,n.uX)(),(0,n.CE)("div",go,[(0,n.Lk)("div",yo,[wo,(0,n.Lk)("p",null,'Are you sure you want to delete "'+(0,k.v_)(r.deleteBookData.name)+'"?',1),(0,n.Lk)("button",{class:"btn btn-danger",onClick:t[9]||(t[9]=(...e)=>i.deleteBook&&i.deleteBook(...e))},"Delete"),(0,n.Lk)("button",{class:"btn btn-secondary",onClick:t[10]||(t[10]=(...e)=>i.closeOverlay&&i.closeOverlay(...e))},"Cancel")])])):(0,n.Q3)("",!0)])}var _o={data(){return{books:[],showUpdateOverlay:!1,showDeleteOverlay:!1,editBook:{id:null,name:"",content:"",author:"",price:"",poster:""},deleteBookData:null,section_id:localStorage.getItem("sectionId")}},mounted(){this.fetchBooks()},methods:{async fetchBooks(){try{const e=await _.A.get(`/storebooks/${this.$route.params.section_id}`);this.books=e.data,console.log("book is -",e)}catch(e){console.error("Error fetching books:",e)}},async fetchSearchBooks(){try{const e=await _.A.get(`/storebooks/${this.$route.params.section_id}?search=${this.searchTerm}`);this.books=e.data,console.log("Searched books:",e)}catch(e){console.error("Error searching books:",e)}},openUpdateOverlay(e){this.editBook={...e},this.showUpdateOverlay=!0},openDeleteOverlay(e){this.deleteBookData=e,this.showDeleteOverlay=!0},async updateBook(){try{console.log("editBook:",this.editBook),console.log("section id",this.section_id),await _.A.put(`/books/${this.section_id}/${this.editBook.id}`,this.editBook),this.closeOverlay(),this.fetchBooks()}catch(e){console.error("Error updating book:",e)}},async deleteBook(){try{console.log("working"),await _.A.delete(`/books/${this.section_id}/${this.deleteBookData.id}`),this.closeOverlay(),this.fetchBooks()}catch(e){console.error("Error deleting book:",e)}},closeOverlay(){this.showUpdateOverlay=!1,this.showDeleteOverlay=!1}}};const Do=(0,i.A)(_o,[["render",So],["__scopeId","data-v-40235582"]]);var Co=Do;const Ao={class:"navbar navbar-expand-lg navbar-light bg-light"},Eo=(0,n.Lk)("a",{class:"navbar-brand",href:"#"},"MyApp",-1),Bo=(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1),Io={class:"collapse navbar-collapse",id:"navbarNav"},Uo={class:"navbar-nav ml-auto"},Xo={class:"nav-item"},$o=(0,n.Lk)("h1",null,"Sections ",-1),xo={class:"row justify-content-center w-100"},No={class:"table table-striped",style:{width:"70%"}},qo=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"Description"),(0,n.Lk)("th",null,"Created Date"),(0,n.Lk)("th",null,"Options")])],-1),Oo={key:0},Vo=(0,n.Lk)("p",null,"No books available.",-1),Fo=[Vo];function Jo(e,t,o,s,a,r){const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",null,[(0,n.Lk)("nav",Ao,[Eo,Bo,(0,n.Lk)("div",Io,[(0,n.Lk)("ul",Uo,[(0,n.Lk)("li",Xo,[(0,n.bF)(i,{to:"/profile/"+this.user_id,class:"nav-link"},{default:(0,n.k6)((()=>[(0,n.eW)("Profile")])),_:1},8,["to"])])])])]),$o,(0,n.Lk)("div",xo,[(0,n.Lk)("table",No,[qo,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.sections,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t,style:{"font-size":"20px"}},[(0,n.Lk)("td",null,(0,k.v_)(e.name),1),(0,n.Lk)("td",null,(0,k.v_)(e.description),1),(0,n.Lk)("td",null,(0,k.v_)(r.formatDate(e.date_created)),1),(0,n.Lk)("td",null,[(0,n.bF)(i,{to:"/userbooks/"+this.user_id+"/"+e.id,class:"btn btn-info mr-3"},{default:(0,n.k6)((()=>[(0,n.eW)("View Books")])),_:2},1032,["to"])])])))),128))])])])]),0===a.sections.length?((0,n.uX)(),(0,n.CE)("div",Oo,Fo)):(0,n.Q3)("",!0)],64)}var Po={data(){return{newSectionName:"",newSectionDescription:"",sections:[],editingSection:null,editedSectionName:"",editedSectionDescription:"",confirmingDelete:!1,deletedSection:null,user_id:null}},mounted(){this.user_id=localStorage.getItem("user_id"),this.fetchSections()},methods:{async fetchSections(){try{const e=await _.A.get("/sections");this.sections=e.data,console.log(this.user_id)}catch(e){console.error("Error fetching sections:",e)}},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)}}};const Qo=(0,i.A)(Po,[["render",Jo]]);var Ro=Qo;const To=(0,n.Lk)("h1",null,"Books",-1),jo={class:"container"},Mo={class:"row"},Wo={class:"card"},Ko=["src"],Yo={class:"card-body"},Go={class:"card-title"},zo={class:"card-text"},Ho={class:"card-text"},Zo=["onClick"],es={key:0},ts=(0,n.Lk)("p",null,"No books available.",-1),os=[ts];function ss(e,t,o,s,a,r){return(0,n.uX)(),(0,n.CE)("div",null,[To,(0,n.Lk)("div",jo,[(0,n.Lk)("div",Mo,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.books,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"col-md-4 mb-4"},[(0,n.Lk)("div",Wo,[(0,n.Lk)("img",{src:e.poster,class:"card-img-top",alt:"Book Cover",height:"300px",width:"300px"},null,8,Ko),(0,n.Lk)("div",Yo,[(0,n.Lk)("h5",Go,(0,k.v_)(e.name),1),(0,n.Lk)("p",zo,"Author - "+(0,k.v_)(e.author),1),(0,n.Lk)("p",Ho,"Price - "+(0,k.v_)(e.price),1),(0,n.Lk)("button",{class:"btn btn-primary",onClick:t=>r.requestAccess(e.id,e.name)}," Request Access ",8,Zo)])])])))),128))])]),0===a.books.length?((0,n.uX)(),(0,n.CE)("div",es,os)):(0,n.Q3)("",!0)])}var ns={data(){return{books:[],section_id:null,user_id:null,username:null}},mounted(){this.section_id=this.$route.params.section_id,this.user_id=localStorage.getItem("user_id"),this.username=localStorage.getItem("username"),console.log("User ID:",this.user_id),console.log("Username:",this.username),this.fetchBooks(),this.fetchRequestedBooksCount()},methods:{async fetchBooks(){try{const e=await _.A.get(`/storebooks/${this.section_id}`);this.books=e.data,console.log("Books fetched:",this.books)}catch(e){console.error("Error fetching books:",e)}},async fetchRequestedBooksCount(){try{const e=await _.A.get("/api/requested-books-count",{params:{user_id:this.user_id}});this.requestedBooksCount=e.data.count,console.log("Requested books count:",this.requestedBooksCount)}catch(e){console.error("Error fetching requested books count:",e)}},async requestAccess(e,t){if(this.requestedBooksCount>=5)return void this.$swal.fire("Limit Exceeded","You cannot request more than 5 books at a time.","error");console.log("Requesting access for book:",t,"by user:",this.username);const{value:o}=await this.$swal.fire({title:"For how many days do you want to take access?",input:"number",inputAttributes:{min:1,max:7,step:1},inputValidator:e=>{if(!e||e<1||e>7)return"Invalid number of days. Please enter a number between 1 and 7."},showCancelButton:!0});if(!o)return void console.log("Request canceled or invalid input");console.log("Days selected:",o);const s=await this.$swal.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, send request!",cancelButtonText:"No, cancel!"});if(console.log("User ID:",this.user_id),console.log("Username:",this.username),console.log("Book ID:",e),console.log("Days:",o),console.log("Book Name:",t),s.isConfirmed){console.log("User confirmed the request");try{const s=await _.A.post("/api/request-access",{section_id:this.section_id,user_id:this.user_id,book_id:e,days:parseInt(o,10),book_name:t,user_name:this.username});s.data.success?(console.log("Request sent successfully"),this.$swal.fire("Success","Your request was sent successfully.","success")):(console.log("Failed to send request:",s.data.message),this.$swal.fire("Error","Failed to send request.","error"))}catch(n){console.error("Error requesting access:",n),this.$swal.fire("Error","An error occurred. Please try again.","error")}}else console.log("User canceled the request")}}};const as=(0,i.A)(ns,[["render",ss]]);var rs=as;const is=e=>((0,n.Qi)("data-v-35bcc4b8"),e=e(),(0,n.jt)(),e),ls={class:"container mt-5"},cs={class:"row justify-content-center"},ds={class:"col-md-8"},us={class:"card"},ks=is((()=>(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"User Profile")],-1))),hs={class:"card-body"},ps={class:"form-group"},ms=is((()=>(0,n.Lk)("label",{for:"username"},"Username",-1))),bs={class:"form-group"},vs=is((()=>(0,n.Lk)("label",{for:"password"},"Password",-1))),fs={key:0},Ls={class:"table table-bordered mt-4"},gs=is((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Book Name"),(0,n.Lk)("th",null,"Days"),(0,n.Lk)("th",null,"Status"),(0,n.Lk)("th",null,"Id of book"),(0,n.Lk)("th",null,"Link")])],-1))),ys=["onClick"],ws={key:1},Ss=is((()=>(0,n.Lk)("p",null,"No BOOK BORROWED",-1))),_s=[Ss];function Ds(e,t,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",ls,[(0,n.Lk)("div",cs,[(0,n.Lk)("div",ds,[(0,n.Lk)("div",us,[ks,(0,n.Lk)("div",hs,[(0,n.Lk)("form",null,[(0,n.Lk)("div",ps,[ms,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),class:"form-control",disabled:""},null,512),[[s.Jo,r.username]])]),(0,n.Lk)("div",bs,[vs,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),class:"form-control",disabled:""},null,512),[[s.Jo,r.password]])])])])]),r.filteredAccessData.length>0?((0,n.uX)(),(0,n.CE)("div",fs,[(0,n.Lk)("table",Ls,[gs,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.filteredAccessData,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("td",null,(0,k.v_)(e.book_name),1),(0,n.Lk)("td",null,(0,k.v_)(e.days),1),(0,n.Lk)("td",null,(0,k.v_)(e.status),1),(0,n.Lk)("td",null,(0,k.v_)(e.bookId),1),(0,n.Lk)("td",null,[(0,n.Lk)("a",{onClick:t=>i.handleLinkClick(t,e),href:"#"},"open url",8,ys)])])))),128))])])])):((0,n.uX)(),(0,n.CE)("div",ws,_s))])])])}var Cs=o(4874),As=o.n(Cs),Es={data(){return{username:localStorage.getItem("username")||"Guest",password:"********",userAccessData:[],filteredAccessData:[]}},mounted(){this.fetchUserAccessData()},methods:{async fetchUserAccessData(){try{const e=localStorage.getItem("user_id");console.log(e);const t=await _.A.get("/api/user-access-data",{headers:{user_id:e}});this.userAccessData=t.data,console.log("User access data:",this.userAccessData),this.filteredAccessData=this.userAccessData.filter((t=>t.user_id==e))}catch(e){console.error("Error fetching user access data:",e),As().fire("Error","Failed to fetch user access data.","error")}},handleLinkClick(e,t){if("Granted"!==t.status)return e.preventDefault(),void As().fire("Access Denied","Access not granted for this book.","error");localStorage.setItem("bookId",t.bookId),this.$router.push(`/view-pdf/${t.bookId}`)}}};const Bs=(0,i.A)(Es,[["render",Ds],["__scopeId","data-v-35bcc4b8"]]);var Is=Bs;const Us=e=>((0,n.Qi)("data-v-5fcf0158"),e=e(),(0,n.jt)(),e),Xs={class:"container mt-5"},$s={class:"row justify-content-center"},xs={class:"col-md-10"},Ns={class:"card"},qs=Us((()=>(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"User Book Access")],-1))),Os={class:"card-body"},Vs={class:"table table-bordered"},Fs=Us((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Username"),(0,n.Lk)("th",null,"Book Name"),(0,n.Lk)("th",null,"User ID"),(0,n.Lk)("th",null,"Book ID"),(0,n.Lk)("th",null,"Days"),(0,n.Lk)("th",null,"Status"),(0,n.Lk)("th",null,"Options")])],-1))),Js=["onClick"],Ps=["onClick"];function Qs(e,t,o,s,a,r){return(0,n.uX)(),(0,n.CE)("div",Xs,[(0,n.Lk)("div",$s,[(0,n.Lk)("div",xs,[(0,n.Lk)("div",Ns,[qs,(0,n.Lk)("div",Os,[(0,n.Lk)("table",Vs,[Fs,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.userBookAccessData,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("td",null,(0,k.v_)(e.username),1),(0,n.Lk)("td",null,(0,k.v_)(e.book_name),1),(0,n.Lk)("td",null,(0,k.v_)(e.user_id),1),(0,n.Lk)("td",null,(0,k.v_)(e.bookId),1),(0,n.Lk)("td",null,(0,k.v_)(e.days),1),(0,n.Lk)("td",null,(0,k.v_)(e.status),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-success mr-3",onClick:o=>r.handleAccept(t,e.id)},"Accept",8,Js),(0,n.Lk)("button",{class:"btn btn-danger",onClick:o=>r.handleDecline(t,e.id)},"Decline",8,Ps)])])))),128))])])])])])])])}var Rs={data(){return{userBookAccessData:[]}},mounted(){this.fetchUserBookAccessData()},methods:{async fetchUserBookAccessData(){try{const e=await _.A.get("/api/user-access-data");this.userBookAccessData=e.data,console.log("User book access data:",this.userBookAccessData)}catch(e){console.error("Error fetching user book access data:",e)}},async handleAccept(e,t){const o=await As().fire({title:"Are you sure?",text:"Do you want to grant access?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, grant it!",cancelButtonText:"No, cancel!"});if(o.isConfirmed)try{await _.A.post(`/api/update-access-status/${t}`,{status:"Granted"}),this.userBookAccessData[e].status="Granted",As().fire("Granted!","The access has been granted.","success")}catch(s){console.error("Error updating status:",s),As().fire("Error!","Failed to update status.","error")}},async handleDecline(e,t){const o=await As().fire({title:"Are you sure?",text:"Do you want to revoke access?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, revoke it!",cancelButtonText:"No, cancel!"});if(o.isConfirmed)try{await _.A.post(`/api/update-access-status/${t}`,{status:"Revoked"}),this.userBookAccessData[e].status="Revoked",As().fire("Revoked!","The access has been revoked.","success")}catch(s){console.error("Error updating status:",s),As().fire("Error!","Failed to update status.","error")}}}};const Ts=(0,i.A)(Rs,[["render",Qs],["__scopeId","data-v-5fcf0158"]]);var js=Ts;const Ms=e=>((0,n.Qi)("data-v-36ac8f53"),e=e(),(0,n.jt)(),e),Ws={class:"container mt-4"},Ks=Ms((()=>(0,n.Lk)("strong",null,"Author:",-1))),Ys=Ms((()=>(0,n.Lk)("strong",null,"Price:",-1))),Gs=Ms((()=>(0,n.Lk)("p",null,[(0,n.Lk)("strong",null,"Content:")],-1))),zs={class:"book-content"},Hs=Ms((()=>(0,n.Lk)("strong",null,"Issue Date:",-1))),Zs=["src"];function en(e,t,o,s,a,r){return(0,n.uX)(),(0,n.CE)("div",Ws,[(0,n.Lk)("h2",null,(0,k.v_)(a.book.name),1),(0,n.Lk)("p",null,[Ks,(0,n.eW)(" "+(0,k.v_)(a.book.author),1)]),(0,n.Lk)("p",null,[Ys,(0,n.eW)(" "+(0,k.v_)(a.book.price),1)]),Gs,(0,n.Lk)("div",zs,(0,k.v_)(a.book.content),1),(0,n.Lk)("p",null,[Hs,(0,n.eW)(" "+(0,k.v_)(r.formatDate(a.book.issue_date)),1)]),a.book.poster?((0,n.uX)(),(0,n.CE)("img",{key:0,src:a.book.poster,alt:"Book Poster",class:"img-fluid"},null,8,Zs)):(0,n.Q3)("",!0)])}var tn={data(){return{book:{}}},created(){this.fetchBook()},methods:{async fetchBook(){try{const e=localStorage.getItem("bookId");console.log(e);const t=await _.A.get(`/books/${e}`);this.book=t.data}catch(e){console.error("Error fetching book:",e),alert("Failed to fetch book details.")}},formatDate(e){return new Date(e).toLocaleDateString()}}};const on=(0,i.A)(tn,[["render",en],["__scopeId","data-v-36ac8f53"]]);var sn=on;const nn=[{path:"/dashboard",name:"Dashboard",component:A},{path:"/login",name:"login",component:J},{path:"/",name:"helloworld",component:K},{path:"/signup",name:"signup",component:se},{path:"/admin",name:"admin",component:ve},{path:"/adminDashboard",name:"adminDashboard",component:Me,meta:{isAdmin:!0}},{path:"/userlogin",name:"userlogin",component:et},{path:"/addsection",name:"addsection",component:kt},{path:"/addbook/:section_id",name:"addbook",component:$t},{path:"/managebook",name:"managebook",component:Wt},{path:"/storebooks/:section_id",name:"storebooks",component:Co},{path:"/usersection/:user_id",name:"usersection",component:Ro},{path:"/userbooks/:user_id/:section_id",name:"userbooks",component:rs},{path:"/profile/:user_id",name:"Profile",component:Is},{path:"/userbookaccess",name:"UserBookAccess",component:js},{path:"/view-pdf/:bookId",name:"PdfViewer",component:sn}],an=(0,u.aE)({history:(0,u.LA)(),routes:nn});an.beforeEach(((e,t,o)=>{const s=localStorage.getItem("userRole")||"user";e.meta.isAdmin&&"admin"!==s?o({path:"/login",query:{unauthorized:!0}}):o()}));var rn=an,ln=(o(7917),o(5329)),cn=o(7760);_.A.defaults.baseURL="http://127.0.0.1:5000";const dn=_.A.create({baseURL:"http://127.0.0.1:5000"}),un=(0,s.Ef)(d);un.use(rn),un.use(ln.A),un.use(ee.Ay),un.use(cn.VuelidatePlugin),un.config.globalProperties.$axios=dn,un.mount("#app")}},t={};function o(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,s,n,a){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],a=e[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&a||r>=a)&&Object.keys(o.O).every((function(e){return o.O[e](s[l])}))?s.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,n,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,a,r=s[0],i=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(l)var d=l(o)}for(t&&t(s);c<r.length;c++)a=r[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},s=self["webpackChunkbootcamp"]=self["webpackChunkbootcamp"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(7439)}));s=o.O(s)})();
//# sourceMappingURL=app.b49b90db.js.map